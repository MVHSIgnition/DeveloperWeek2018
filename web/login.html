<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Home - EZ Goal</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto|Material+Icons" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/material-components.css">
		<link rel="stylesheet" type="text/css" href="css/global.css">
		<link rel="stylesheet" type="text/css" href="css/profile.css">
	</head>

	<body>
		<!-- navbar -->
		<div class="navbar">
			<div style="padding: 0 10px;">
				<h1 style="font-size: 30px;"><a href="index.html">EZ Goal</a></h1>
			</div>
			<div style="float: right; padding: 12px 18px;" class="nav-links">
				<span><a href="index.html">Home</a></span>
				<span><a href="rewards.html">Rewards</a></span>
				<span>Connect</span>
				<span><a>Profile</a></span>
			</div>
		</div>
		<!-- end navbar -->
		<div class="main-content">
			<div style="max-height: 100vh; width: 100%; overflow: hidden; padding: 0; position: relative;">
				
				
				
			</div>
		</div>
		<div class="footer">
			<div style="padding: 24px 20px;">
				<h1>Terms | Privacy | English</h1>
			</div>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/material-components.js"></script>
		<script type="text/javascript" src="js/global.js"></script>
		<script src="socket.io.js"></script>

		<script>
		function getUsername() {
			if(window.location.search.substring(1).split('?')[0].split('=')[0] !== 'user') {
			return null;
			} else {
				return window.location.search.substring(1).split('?')[0].split('=')[1];
			}
		}
		var actualusername;
		$(function(){
			var socket = io("http://13.56.150.166:1266");
			socket.on("return_user_goals", function(msg){
			var usergoals = msg;
			var totalhtml = "";
			for(var i = 0; i < usergoals.length; i++){
			totalhtml+="<div class='goal'><h1>"+usergoals[i].info+"</h1><div id='myProgress'><div id='myBar1'></div></div><span class='money-sign'>$</span><input type='number' name='' placeholder='bet'><br><button onclick = 'makeABet("+i+")'>Bet</button></div>";
			}
			
			document.getElementById("goals_list").innerHTML = totalhtml;
			
			});
			
			socket.on("return_username", function(msg){
				if(msg == ""){
					window.location.replace("index.html");
				}
				else{
					actualusername = msg;
					console.log(msg);
				}
			});
			
			socket.emit("get_username", {});
			
			if(getUsername()){
			socket.emit("get_user_goals", {
			username : getUsername()
			});
			}
			
			socket.on("return_user", function(msg){
			console.log(msg);
				document.getElementById("name").innerHTML = msg.name;
				document.getElementById("name_small").innerHTML = msg.name;
				
			});
			if(getUsername()){
			socket.emit("get_user_from_username", {
			username : getUsername()
			});
			}
			
		
			
		});	
		
		function makeABet(i){
			console.log(i);
		}
		
		

		</script>
	</body>
</html>
